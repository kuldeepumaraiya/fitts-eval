{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/parth/Videos/Docs/React/Github/fitts-eval/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/parth/Videos/Docs/React/Github/fitts-eval/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\parth\\\\Videos\\\\Docs\\\\React\\\\Github\\\\fitts-eval\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nvar CONST = {\n  min_dist: 30,\n  size1: 47,\n  size2: 54,\n  size3: 61,\n  rounds: 30\n};\n\nfunction convertToCSV(objArray) {\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\n  var str = Object.keys(array[0]).join(',');\n  str = str + '\\r\\n';\n\n  for (var i = 0; i < array.length; i++) {\n    var line = '';\n\n    for (var index in array[i]) {\n      if (line != '') line += ',';\n      line += array[i][index];\n    }\n\n    str += line + '\\r\\n';\n  }\n\n  return str;\n}\n\nfunction Target(_ref) {\n  var target = _ref.target,\n      radius = _ref.radius;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"target-box\",\n    style: {\n      left: \"\".concat(target[0] - 2 * radius, \"px\"),\n      top: \"\".concat(target[1] - 2 * radius, \"px\"),\n      width: \"\".concat(4 * radius, \"px\"),\n      height: \"\".concat(4 * radius, \"px\")\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"target-core\",\n      style: {\n        left: \"\".concat(radius, \"px\"),\n        top: \"\".concat(radius, \"px\"),\n        width: \"\".concat(2 * radius, \"px\"),\n        height: \"\".concat(2 * radius, \"px\")\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Target;\n\nfunction randInt(range) {\n  var min = Math.ceil(range[0]);\n  var max = Math.floor(range[1]);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction randFloat(range) {\n  var min = Math.ceil(range[0]);\n  var max = Math.floor(range[1]);\n  return Math.random() * (max - min) + min;\n}\n\nfunction nextPos(target, bounds, radius, pad) {\n  var min_dist = CONST.min_dist;\n  var x_range = [pad + radius, bounds[0] - pad - radius];\n  var y_range = [pad + radius, bounds[1] - pad - radius];\n  var next = [randInt(x_range), randInt(y_range)];\n  var t = randFloat([0, 360]);\n  next = getPointOnCircumference(t, target);\n\n  while (!checkInside(next[0], next[1])) {\n    var _t = randFloat([0, 360]);\n\n    next = getPointOnCircumference(_t, target);\n  } // while(calcDist(target,next)<min_dist){\n  //   next = [randInt(x_range),randInt(y_range)]\n  // }\n\n\n  return next;\n}\n\nfunction getPointOnCircumference(t, center) {\n  var temp_x = radius * Math.cos(t) + center[0];\n  var temp_y = radius * Math.sin(t) + center[1];\n  return [temp_x, temp_y];\n}\n\nfunction checkInside(x, y) {\n  if (x + radius < screen.width && x - radius > 0) {\n    if (y + radius < screen.height && y - radius > 0) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction calcDist(from, to) {\n  try {\n    var x = parseFloat(from[0]) - parseFloat(to[0]);\n    var y = parseFloat(from[1]) - parseFloat(to[1]);\n    return Math.sqrt(x * x + y * y);\n  } catch (_unused) {\n    return -1;\n  }\n}\n\nexport default function Home() {\n  _s();\n\n  var _useState = useState(CONST.size1),\n      pad = _useState[0],\n      setPad = _useState[1];\n\n  var _useState2 = useState(CONST.size1),\n      radius = _useState2[0],\n      setRadius = _useState2[1];\n\n  var _useState3 = useState(\"LMAO\"),\n      username = _useState3[0],\n      setUsername = _useState3[1];\n\n  var _useState4 = useState(20),\n      age = _useState4[0],\n      setAge = _useState4[1];\n\n  var _useState5 = useState(CONST.size1),\n      distanceRadius = _useState5[0],\n      setDistanceRadius = _useState5[1];\n\n  var _useState6 = useState([0, 0]),\n      bounds = _useState6[0],\n      setBounds = _useState6[1];\n\n  var _useState7 = useState([0, 0]),\n      target = _useState7[0],\n      setTarget = _useState7[1];\n\n  var _useState8 = useState([radius, radius]),\n      touch = _useState8[0],\n      setTouch = _useState8[1];\n\n  var _useState9 = useState([radius, radius]),\n      next = _useState9[0],\n      setNext = _useState9[1];\n\n  var _useState10 = useState(0),\n      round = _useState10[0],\n      setRound = _useState10[1];\n\n  var _useState11 = useState(0),\n      time = _useState11[0],\n      setTime = _useState11[1];\n\n  var _useState12 = useState(0),\n      prevTime = _useState12[0],\n      setPrevTime = _useState12[1];\n\n  var _useState13 = useState('wait'),\n      status = _useState13[0],\n      setStatus = _useState13[1];\n\n  var _useState14 = useState([]),\n      log = _useState14[0],\n      setLog = _useState14[1];\n\n  function handleTouchStart(event) {\n    console.log(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n    setTouch([event.changedTouches[0].clientX, event.changedTouches[0].clientY]);\n  }\n\n  function init() {\n    setStatus('go');\n    setTime(Date.now());\n    setPrevTime(Date.now());\n    var next = nextPos(target, bounds, radius, pad);\n    setTarget(next);\n  }\n\n  useEffect(function () {\n    setBounds([parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width), parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)]);\n    setTarget([radius + pad, radius + pad]);\n  }, []);\n\n  function saveCsv(data) {\n    var csvStr = convertToCSV(data);\n    var csvContent = \"data:text/csv;charset=utf-8,\" + csvStr;\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"fitts_\".concat(new Date().toISOString(), \".csv\"));\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var now, _next;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(status !== 'go')) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            now = Date.now();\n            setLog(log.concat([{\n              'round': round + 1,\n              'target_x': Math.round(target[0]),\n              'target_y': Math.round(target[1]),\n              'touch_x': Math.round(touch[0]),\n              'touch_y': Math.round(touch[1]),\n              's_time': prevTime - time,\n              'e_time': now - time,\n              'duration': now - prevTime,\n              'distance': Math.round(calcDist(touch, target)),\n              'hit': calcDist(touch, target) < 2 * radius,\n              'username': username,\n              'inputDistanceRadius': distanceRadius,\n              'inputTargetRadius': radius,\n              'inputAge': age\n            }]));\n            _context.next = 6;\n            return setRound(round + 1);\n\n          case 6:\n            _context.next = 8;\n            return setPrevTime(now);\n\n          case 8:\n            if (calcDist(touch, target) < 2 * radius) {\n              _next = nextPos(target, bounds, radius, pad);\n              setTarget(_next);\n            }\n\n            if (log.filter(function (x) {\n              return x.hit;\n            }).length >= CONST.rounds) {\n              setStatus('end');\n            }\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [touch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Fitts Eval\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"apple-mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"touch-bound\",\n      className: \"board\",\n      onTouchEnd: function onTouchEnd(e) {\n        handleTouchStart(e);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menuItemContainer\",\n        children: [status === 'wait' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"startBtn\",\n          onClick: init,\n          children: \"Start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 30\n        }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"distance radius\",\n            className: \"inputBox\",\n            onChange: function onChange(e) {\n              return setDistanceRadius(parseInt(e.target.value));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"target button radius\",\n            className: \"inputBox\",\n            onChange: function onChange(e) {\n              return setRadius(parseInt(e.target.value));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Age\",\n            className: \"inputBox\",\n            onChange: function onChange(e) {\n              return setAge(parseInt(e.target.value));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"User name\",\n            className: \"inputBox\",\n            onChange: function onChange(e) {\n              return setUsername(parseInt(e.target.value));\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas\",\n        style: {\n          margin: \"\".concat(pad, \"px\")\n        },\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"log-box\",\n          children: JSON.stringify(log.map(function (x) {\n            return [x.round, x.dist, x.e_time - x.s_time];\n          }), null, 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), status === 'go' ? /*#__PURE__*/_jsxDEV(Target, {\n        radius: radius,\n        target: target\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 26\n      }, this) : '', status === 'end' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"startBtn\",\n        onClick: function onClick() {\n          return saveCsv(log);\n        },\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 27\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"yAZ3oBM6rYuIGGEerve/m/jSNqs=\");\n\n_c2 = Home;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Target\");\n$RefreshReg$(_c2, \"Home\");","map":{"version":3,"sources":["C:/Users/parth/Videos/Docs/React/Github/fitts-eval/pages/index.js"],"names":["useState","useEffect","Head","CONST","min_dist","size1","size2","size3","rounds","convertToCSV","objArray","array","JSON","parse","str","Object","keys","join","i","length","line","index","Target","target","radius","left","top","width","height","randInt","range","min","Math","ceil","max","floor","random","randFloat","nextPos","bounds","pad","x_range","y_range","next","t","getPointOnCircumference","checkInside","center","temp_x","cos","temp_y","sin","x","y","screen","calcDist","from","to","parseFloat","sqrt","Home","setPad","setRadius","username","setUsername","age","setAge","distanceRadius","setDistanceRadius","setBounds","setTarget","touch","setTouch","setNext","round","setRound","time","setTime","prevTime","setPrevTime","status","setStatus","log","setLog","handleTouchStart","event","console","changedTouches","clientX","clientY","init","Date","now","parseInt","document","getElementById","getBoundingClientRect","saveCsv","data","csvStr","csvContent","encodedUri","encodeURI","link","createElement","setAttribute","toISOString","body","appendChild","click","concat","filter","hit","e","value","margin","stringify","map","dist","e_time","s_time"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Head from 'next/head'\r\n\r\n\r\nconst CONST = {\r\n  min_dist : 30,\r\n  size1 : 47,\r\n  size2 : 54,\r\n  size3 : 61,\r\n  rounds : 30\r\n}\r\n\r\n\r\n\r\n\r\nfunction convertToCSV(objArray) {\r\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\r\n  var str = Object.keys(array[0]).join(',');\r\n  str=str+'\\r\\n';\r\n\r\n  for (var i = 0; i < array.length; i++) {\r\n    var line = '';\r\n    for (var index in array[i]) {\r\n      if (line != '') line += ','\r\n      line += array[i][index];\r\n    }\r\n    str += line + '\\r\\n';\r\n  }\r\n  return str;\r\n}\r\n\r\n\r\nfunction Target({target,radius}) {\r\n\r\n  return(\r\n    <div className=\"target-box\" style={{\r\n      left:`${target[0]-2*radius}px`,\r\n      top:`${target[1]-2*radius}px`,\r\n      width:`${4*radius}px`,\r\n      height:`${4*radius}px`\r\n    }}>\r\n      <div className=\"target-core\" style={{\r\n        left:`${radius}px`,\r\n        top:`${radius}px`,\r\n        width:`${2*radius}px`,\r\n        height:`${2*radius}px`\r\n      }}>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction randInt(range) {\r\n  var min = Math.ceil(range[0]);\r\n  var max = Math.floor(range[1]);\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n}\r\n\r\nfunction randFloat(range) {\r\n  var min = Math.ceil(range[0]);\r\n  var max = Math.floor(range[1]);\r\n  return Math.random() * (max - min) + min;\r\n}\r\n\r\n\r\nfunction nextPos(target,bounds,radius,pad){\r\n\r\n  const min_dist = CONST.min_dist;\r\n  const x_range = [pad+radius,bounds[0]-pad-radius]\r\n  const y_range = [pad+radius,bounds[1]-pad-radius]\r\n\r\n  let next = [randInt(x_range),randInt(y_range)]\r\n  let t = randFloat([0 ,360])\r\n  next = getPointOnCircumference(t,target)\r\n\r\n  while(!checkInside(next[0], next[1])){\r\n    let t = randFloat([0 ,360])\r\n    next = getPointOnCircumference(t,target)\r\n  }\r\n\r\n  // while(calcDist(target,next)<min_dist){\r\n  //   next = [randInt(x_range),randInt(y_range)]\r\n  // }\r\n  return next\r\n}\r\n\r\n\r\nfunction getPointOnCircumference(t, center){\r\n  let temp_x = radius * Math.cos(t) + center[0];\r\n  let temp_y = radius * Math.sin(t) + center[1];\r\n  return [temp_x, temp_y];\r\n}\r\n\r\n\r\nfunction checkInside(x,y){\r\n  if(x + radius < screen.width && x - radius > 0){\r\n    if(y + radius < screen.height && y - radius > 0){\r\n      return true;\r\n    }\r\n  }  \r\n  return false;\r\n}\r\n\r\nfunction calcDist(from,to){\r\n\r\n  try{\r\n    var x=parseFloat(from[0])-parseFloat(to[0])\r\n    var y=parseFloat(from[1])-parseFloat(to[1])\r\n    return Math.sqrt(x*x + y*y);\r\n  }\r\n  catch{\r\n    return -1\r\n  }\r\n  \r\n}\r\n\r\nexport default function Home() {\r\n\r\n  const [pad,setPad] = useState(CONST.size1)\r\n  const [radius,setRadius] = useState(CONST.size1)\r\n  const [username,setUsername] = useState(\"LMAO\")\r\n  const [age,setAge] = useState(20)\r\n  const [distanceRadius,setDistanceRadius] = useState(CONST.size1)\r\n  const [bounds, setBounds] = useState([0,0])\r\n  const [target, setTarget] = useState([0,0])\r\n  const [touch, setTouch] = useState([radius,radius])\r\n  const [next, setNext] = useState([radius,radius])\r\n  \r\n  const [round,setRound] = useState(0)\r\n  const [time, setTime] = useState(0)\r\n  const [prevTime,setPrevTime] = useState(0)\r\n\r\n  const [status,setStatus] = useState('wait')\r\n  const [log,setLog] = useState([])\r\n\r\n\r\n  function handleTouchStart(event){\r\n    console.log(event.changedTouches[0].clientX,event.changedTouches[0].clientY)\r\n    setTouch([event.changedTouches[0].clientX,event.changedTouches[0].clientY])\r\n  }\r\n  \r\n\r\n  function init(){\r\n    setStatus('go')\r\n    setTime(Date.now())\r\n    setPrevTime(Date.now())\r\n    \r\n    const next = nextPos(target,bounds,radius,pad)\r\n    setTarget(next)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    setBounds([\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width),\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)\r\n    ])\r\n    setTarget([radius+pad,radius+pad])\r\n  },[])\r\n\r\n\r\n  function saveCsv(data){\r\n    let csvStr = convertToCSV(data)\r\n    let csvContent = \"data:text/csv;charset=utf-8,\"+csvStr\r\n    var encodedUri = encodeURI(csvContent);\r\n    \r\n    var link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", encodedUri);\r\n    link.setAttribute(\"download\", `fitts_${(new Date()).toISOString()}.csv`);\r\n    document.body.appendChild(link); \r\n\r\n    link.click();\r\n  }\r\n\r\n  useEffect(async()=>{\r\n    if(status!=='go')return;\r\n    \r\n    const now = Date.now()\r\n    setLog(log.concat([{\r\n      'round': round+1,\r\n      'target_x' : Math.round(target[0]),\r\n      'target_y' : Math.round(target[1]),\r\n      'touch_x' : Math.round(touch[0]),\r\n      'touch_y' : Math.round(touch[1]),\r\n      's_time': prevTime-time,\r\n      'e_time': now-time,\r\n      'duration' : now - prevTime,\r\n      'distance' : Math.round(calcDist(touch,target)),\r\n      'hit' : (calcDist(touch,target)<(2*radius)),\r\n      'username': username,\r\n      'inputDistanceRadius': distanceRadius,\r\n      'inputTargetRadius': radius,\r\n      'inputAge': age,\r\n    }]))\r\n\r\n    await setRound(round+1)\r\n\r\n    await setPrevTime(now)\r\n\r\n    if(calcDist(touch,target)<2*radius){\r\n      const next = nextPos(target,bounds,radius,pad)\r\n      setTarget(next)\r\n    }\r\n    \r\n    if(log.filter(x=>(x.hit)).length>=CONST.rounds){\r\n      setStatus('end')\r\n    }\r\n      \r\n  },[touch])\r\n\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Fitts Eval</title>\r\n        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover'/>\r\n        <meta name=\"mobile-web-app-capable\" content=\"yes\"/>\r\n        <meta name=\"apple-mobile-web-app-capable\" content=\"yes\"/>\r\n      </Head>\r\n      \r\n      <div id=\"touch-bound\" className=\"board\" onTouchEnd={(e)=>{handleTouchStart(e)}}>\r\n        <div className=\"menuItemContainer\">\r\n          {(status==='wait')?<div className=\"startBtn\" onClick={init}>Start</div>:''}\r\n          {(status==='wait')?<><input type=\"number\" placeholder=\"distance radius\" className=\"inputBox\" onChange={e => setDistanceRadius(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"number\" placeholder=\"target button radius\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"text\" placeholder=\"Age\" className=\"inputBox\" onChange={e => setAge(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"text\" placeholder=\"User name\" className=\"inputBox\" onChange={e => setUsername(parseInt(e.target.value))}/></>:''}\r\n        </div>\r\n        <div className=\"canvas\" style={{margin: `${pad}px`}}>\r\n          <pre className=\"log-box\">\r\n            {JSON.stringify(log.map(x=>[x.round,x.dist,x.e_time-x.s_time]),null,1)}\r\n          </pre>\r\n        </div>\r\n        {(status==='go')?<Target radius={radius} target={target}/>:''}\r\n        {(status==='end')?<div className=\"startBtn\" onClick={()=>saveCsv(log)}>Download</div>:''}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}