{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\parth\\\\Videos\\\\Docs\\\\React\\\\Github\\\\fitts-eval\\\\pages\\\\index.js\";\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nconst CONST = {\n  min_dist: 30,\n  size1: 47,\n  size2: 54,\n  size3: 61,\n  rounds: 30\n};\n\nfunction convertToCSV(objArray) {\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\n  var str = Object.keys(array[0]).join(',');\n  str = str + '\\r\\n';\n\n  for (var i = 0; i < array.length; i++) {\n    var line = '';\n\n    for (var index in array[i]) {\n      if (line != '') line += ',';\n      line += array[i][index];\n    }\n\n    str += line + '\\r\\n';\n  }\n\n  return str;\n}\n\nfunction Target({\n  target,\n  radius,\n  distanceRadius\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"target-box\",\n    style: {\n      left: `${target[0] - 2 * radius}px`,\n      top: `${target[1] - 2 * radius}px`,\n      width: `${4 * radius}px`,\n      height: `${4 * radius}px`\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"target-core\",\n      style: {\n        left: `${radius}px`,\n        top: `${radius}px`,\n        width: `${2 * radius}px`,\n        height: `${2 * radius}px`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\nfunction randInt(range) {\n  var min = Math.ceil(range[0]);\n  var max = Math.floor(range[1]);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction randFloat(range) {\n  var min = Math.ceil(range[0]);\n  var max = Math.floor(range[1]);\n  return Math.random() * (max - min) + min;\n}\n\nfunction nextPos(target, bounds, radius, pad, distanceRadius) {\n  // const min_dist = CONST.min_dist;\n  // const x_range = [pad+radius,bounds[0]-pad-radius]\n  // const y_range = [pad+radius,bounds[1]-pad-radius]\n  let next = [0, 0];\n  let t = randFloat([0, 360]);\n  next = getPointOnCircumference(t, target, distanceRadius);\n\n  while (!checkInside(next[0], next[1], distanceRadius)) {\n    let t = randFloat([0, 360]);\n    next = getPointOnCircumference(t, target, distanceRadius);\n  } // while(calcDist(target,next)<min_dist){\n  //   next = [randInt(x_range),randInt(y_range)]\n  // }\n\n\n  return next;\n}\n\nfunction getPointOnCircumference(t, center, radius) {\n  let temp_x = radius * Math.cos(t) + center[0];\n  let temp_y = radius * Math.sin(t) + center[1];\n  return [temp_x, temp_y];\n}\n\nfunction checkInside(x, y, radius) {\n  if (x + radius < screen.width && x - radius > 0) {\n    if (y + radius < screen.height && y - radius > 0) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction calcDist(from, to) {\n  try {\n    var x = parseFloat(from[0]) - parseFloat(to[0]);\n    var y = parseFloat(from[1]) - parseFloat(to[1]);\n    return Math.sqrt(x * x + y * y);\n  } catch {\n    return -1;\n  }\n}\n\nexport default function Home() {\n  const {\n    0: pad,\n    1: setPad\n  } = useState(CONST.size1);\n  const {\n    0: radius,\n    1: setRadius\n  } = useState(CONST.size1);\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"LMAO\");\n  const {\n    0: age,\n    1: setAge\n  } = useState(20);\n  const {\n    0: distanceRadius,\n    1: setDistanceRadius\n  } = useState(CONST.size1);\n  const {\n    0: bounds,\n    1: setBounds\n  } = useState([0, 0]);\n  const {\n    0: target,\n    1: setTarget\n  } = useState([0, 0]);\n  const {\n    0: touch,\n    1: setTouch\n  } = useState([radius, radius]);\n  const {\n    0: next,\n    1: setNext\n  } = useState([radius, radius]);\n  const {\n    0: round,\n    1: setRound\n  } = useState(0);\n  const {\n    0: time,\n    1: setTime\n  } = useState(0);\n  const {\n    0: prevTime,\n    1: setPrevTime\n  } = useState(0);\n  const {\n    0: status,\n    1: setStatus\n  } = useState('wait');\n  const {\n    0: log,\n    1: setLog\n  } = useState([]);\n\n  function handleTouchStart(event) {\n    console.log(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n    setTouch([event.changedTouches[0].clientX, event.changedTouches[0].clientY]);\n  }\n\n  function init() {\n    setStatus('go');\n    setTime(Date.now());\n    setPrevTime(Date.now());\n    const next = nextPos(target, bounds, radius, pad, distanceRadius);\n    setTarget(next);\n  }\n\n  useEffect(() => {\n    setBounds([parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width), parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)]);\n    setTarget([radius + pad, radius + pad]);\n  }, []);\n\n  function saveCsv(data) {\n    let csvStr = convertToCSV(data);\n    let csvContent = \"data:text/csv;charset=utf-8,\" + csvStr;\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", `fitts_${new Date().toISOString()}.csv`);\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  useEffect(async () => {\n    if (status !== 'go') return;\n    const now = Date.now();\n    setLog(log.concat([{\n      'round': round + 1,\n      'target_x': Math.round(target[0]),\n      'target_y': Math.round(target[1]),\n      'touch_x': Math.round(touch[0]),\n      'touch_y': Math.round(touch[1]),\n      's_time': prevTime - time,\n      'e_time': now - time,\n      'duration': now - prevTime,\n      'distance': Math.round(calcDist(touch, target)),\n      'hit': calcDist(touch, target) < 2 * radius,\n      'username': username,\n      'inputDistanceRadius': distanceRadius,\n      'inputTargetRadius': radius,\n      'inputAge': age\n    }]));\n    await setRound(round + 1);\n    await setPrevTime(now);\n\n    if (calcDist(touch, target) < 2 * radius) {\n      const next = nextPos(target, bounds, radius, pad, distanceRadius);\n      setTarget(next);\n    }\n\n    if (log.filter(x => x.hit).length >= CONST.rounds) {\n      setStatus('end');\n    }\n  }, [touch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Fitts Eval\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"apple-mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"touch-bound\",\n      className: \"board\",\n      onTouchEnd: e => {\n        handleTouchStart(e);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menuItemContainer\",\n        children: [status === 'wait' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"startBtn\",\n          onClick: init,\n          children: \"Start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 30\n        }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"distance radius\",\n            className: \"inputBox\",\n            onChange: e => setDistanceRadius(parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"target button radius\",\n            className: \"inputBox\",\n            onChange: e => setRadius(parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Age\",\n            className: \"inputBox\",\n            onChange: e => setAge(parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"User name\",\n            className: \"inputBox\",\n            onChange: e => setUsername(parseInt(e.target.value))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 32\n          }, this)\n        }, void 0, false) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas\",\n        style: {\n          margin: `${pad}px`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"log-box\",\n          children: JSON.stringify(log.map(x => [x.round, x.dist, x.e_time - x.s_time]), null, 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), status === 'go' ? /*#__PURE__*/_jsxDEV(Target, {\n        radius: radius,\n        target: target,\n        distanceRadius: distanceRadius\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 26\n      }, this) : '', status === 'end' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"startBtn\",\n        onClick: () => saveCsv(log),\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 27\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["C:/Users/parth/Videos/Docs/React/Github/fitts-eval/pages/index.js"],"names":["useState","useEffect","Head","CONST","min_dist","size1","size2","size3","rounds","convertToCSV","objArray","array","JSON","parse","str","Object","keys","join","i","length","line","index","Target","target","radius","distanceRadius","left","top","width","height","randInt","range","min","Math","ceil","max","floor","random","randFloat","nextPos","bounds","pad","next","t","getPointOnCircumference","checkInside","center","temp_x","cos","temp_y","sin","x","y","screen","calcDist","from","to","parseFloat","sqrt","Home","setPad","setRadius","username","setUsername","age","setAge","setDistanceRadius","setBounds","setTarget","touch","setTouch","setNext","round","setRound","time","setTime","prevTime","setPrevTime","status","setStatus","log","setLog","handleTouchStart","event","console","changedTouches","clientX","clientY","init","Date","now","parseInt","document","getElementById","getBoundingClientRect","saveCsv","data","csvStr","csvContent","encodedUri","encodeURI","link","createElement","setAttribute","toISOString","body","appendChild","click","concat","filter","hit","e","value","margin","stringify","map","dist","e_time","s_time"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Head from 'next/head'\r\n\r\n\r\nconst CONST = {\r\n  min_dist : 30,\r\n  size1 : 47,\r\n  size2 : 54,\r\n  size3 : 61,\r\n  rounds : 30\r\n}\r\n\r\n\r\n\r\n\r\nfunction convertToCSV(objArray) {\r\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\r\n  var str = Object.keys(array[0]).join(',');\r\n  str=str+'\\r\\n';\r\n\r\n  for (var i = 0; i < array.length; i++) {\r\n    var line = '';\r\n    for (var index in array[i]) {\r\n      if (line != '') line += ','\r\n      line += array[i][index];\r\n    }\r\n    str += line + '\\r\\n';\r\n  }\r\n  return str;\r\n}\r\n\r\n\r\nfunction Target({target,radius, distanceRadius}) {\r\n\r\n  return(\r\n    <div className=\"target-box\" style={{\r\n      left:`${target[0]-2*radius}px`,\r\n      top:`${target[1]-2*radius}px`,\r\n      width:`${4*radius}px`,\r\n      height:`${4*radius}px`\r\n    }}>\r\n      \r\n      <div className=\"target-core\" style={{\r\n        left:`${radius}px`,\r\n        top:`${radius}px`,\r\n        width:`${2*radius}px`,\r\n        height:`${2*radius}px`\r\n      }}>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction randInt(range) {\r\n  var min = Math.ceil(range[0]);\r\n  var max = Math.floor(range[1]);\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n}\r\n\r\nfunction randFloat(range) {\r\n  var min = Math.ceil(range[0]);\r\n  var max = Math.floor(range[1]);\r\n  return Math.random() * (max - min) + min;\r\n}\r\n\r\n\r\nfunction nextPos(target,bounds,radius,pad, distanceRadius){\r\n\r\n  // const min_dist = CONST.min_dist;\r\n  // const x_range = [pad+radius,bounds[0]-pad-radius]\r\n  // const y_range = [pad+radius,bounds[1]-pad-radius]\r\n\r\n  let next = [0,0]\r\n  let t = randFloat([0 ,360])\r\n  next = getPointOnCircumference(t,target, distanceRadius)\r\n\r\n  while(!checkInside(next[0], next[1], distanceRadius)){\r\n    let t = randFloat([0 ,360])\r\n    next = getPointOnCircumference(t,target, distanceRadius)\r\n  }\r\n\r\n  // while(calcDist(target,next)<min_dist){\r\n  //   next = [randInt(x_range),randInt(y_range)]\r\n  // }\r\n  return next\r\n}\r\n\r\n\r\nfunction getPointOnCircumference(t, center, radius){\r\n  let temp_x = radius * Math.cos(t) + center[0];\r\n  let temp_y = radius * Math.sin(t) + center[1];\r\n  return [temp_x, temp_y];\r\n}\r\n\r\n\r\nfunction checkInside(x,y, radius){\r\n  if(x + radius < screen.width && x - radius > 0){\r\n    if(y + radius < screen.height && y - radius > 0){\r\n      return true;\r\n    }\r\n  }  \r\n  return false;\r\n}\r\n\r\nfunction calcDist(from,to){\r\n\r\n  try{\r\n    var x=parseFloat(from[0])-parseFloat(to[0])\r\n    var y=parseFloat(from[1])-parseFloat(to[1])\r\n    return Math.sqrt(x*x + y*y);\r\n  }\r\n  catch{\r\n    return -1\r\n  }\r\n  \r\n}\r\n\r\nexport default function Home() {\r\n\r\n  const [pad,setPad] = useState(CONST.size1)\r\n  const [radius,setRadius] = useState(CONST.size1)\r\n  const [username,setUsername] = useState(\"LMAO\")\r\n  const [age,setAge] = useState(20)\r\n  const [distanceRadius,setDistanceRadius] = useState(CONST.size1)\r\n  const [bounds, setBounds] = useState([0,0])\r\n  const [target, setTarget] = useState([0,0])\r\n  const [touch, setTouch] = useState([radius,radius])\r\n  const [next, setNext] = useState([radius,radius])\r\n  \r\n  const [round,setRound] = useState(0)\r\n  const [time, setTime] = useState(0)\r\n  const [prevTime,setPrevTime] = useState(0)\r\n\r\n  const [status,setStatus] = useState('wait')\r\n  const [log,setLog] = useState([])\r\n\r\n\r\n  function handleTouchStart(event){\r\n    console.log(event.changedTouches[0].clientX,event.changedTouches[0].clientY)\r\n    setTouch([event.changedTouches[0].clientX,event.changedTouches[0].clientY])\r\n  }\r\n  \r\n\r\n  function init(){\r\n    setStatus('go')\r\n    setTime(Date.now())\r\n    setPrevTime(Date.now())\r\n    \r\n    const next = nextPos(target,bounds,radius,pad, distanceRadius)\r\n    setTarget(next)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    setBounds([\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width),\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)\r\n    ])\r\n    setTarget([radius+pad,radius+pad])\r\n  },[])\r\n\r\n\r\n  function saveCsv(data){\r\n    let csvStr = convertToCSV(data)\r\n    let csvContent = \"data:text/csv;charset=utf-8,\"+csvStr\r\n    var encodedUri = encodeURI(csvContent);\r\n    \r\n    var link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", encodedUri);\r\n    link.setAttribute(\"download\", `fitts_${(new Date()).toISOString()}.csv`);\r\n    document.body.appendChild(link); \r\n\r\n    link.click();\r\n  }\r\n\r\n  useEffect(async()=>{\r\n    if(status!=='go')return;\r\n    \r\n    const now = Date.now()\r\n    setLog(log.concat([{\r\n      'round': round+1,\r\n      'target_x' : Math.round(target[0]),\r\n      'target_y' : Math.round(target[1]),\r\n      'touch_x' : Math.round(touch[0]),\r\n      'touch_y' : Math.round(touch[1]),\r\n      's_time': prevTime-time,\r\n      'e_time': now-time,\r\n      'duration' : now - prevTime,\r\n      'distance' : Math.round(calcDist(touch,target)),\r\n      'hit' : (calcDist(touch,target)<(2*radius)),\r\n      'username': username,\r\n      'inputDistanceRadius': distanceRadius,\r\n      'inputTargetRadius': radius,\r\n      'inputAge': age,\r\n    }]))\r\n\r\n    await setRound(round+1)\r\n\r\n    await setPrevTime(now)\r\n\r\n    if(calcDist(touch,target)<2*radius){\r\n      const next = nextPos(target,bounds,radius,pad, distanceRadius)\r\n      setTarget(next)\r\n    }\r\n    \r\n    if(log.filter(x=>(x.hit)).length>=CONST.rounds){\r\n      setStatus('end')\r\n    }\r\n      \r\n  },[touch])\r\n\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Fitts Eval</title>\r\n        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover'/>\r\n        <meta name=\"mobile-web-app-capable\" content=\"yes\"/>\r\n        <meta name=\"apple-mobile-web-app-capable\" content=\"yes\"/>\r\n      </Head>\r\n      \r\n      <div id=\"touch-bound\" className=\"board\" onTouchEnd={(e)=>{handleTouchStart(e)}}>\r\n        <div className=\"menuItemContainer\">\r\n          {(status==='wait')?<div className=\"startBtn\" onClick={init}>Start</div>:''}\r\n          {(status==='wait')?<><input type=\"number\" placeholder=\"distance radius\" className=\"inputBox\" onChange={e => setDistanceRadius(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"number\" placeholder=\"target button radius\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"text\" placeholder=\"Age\" className=\"inputBox\" onChange={e => setAge(parseInt(e.target.value))}/></>:''}\r\n          {(status==='wait')?<><input type=\"text\" placeholder=\"User name\" className=\"inputBox\" onChange={e => setUsername(parseInt(e.target.value))}/></>:''}\r\n        </div>\r\n        <div className=\"canvas\" style={{margin: `${pad}px`}}>\r\n          <pre className=\"log-box\">\r\n            {JSON.stringify(log.map(x=>[x.round,x.dist,x.e_time-x.s_time]),null,1)}\r\n          </pre>\r\n        </div>\r\n        {(status==='go')?<Target radius={radius} target={target} distanceRadius={distanceRadius} />:''}\r\n        {(status==='end')?<div className=\"startBtn\" onClick={()=>saveCsv(log)}>Download</div>:''}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}