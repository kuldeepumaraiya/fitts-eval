{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"C:/Users/parth/Videos/Docs/React/Github/fitts-eval/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/parth/Videos/Docs/React/Github/fitts-eval/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\parth\\\\Videos\\\\Docs\\\\React\\\\Github\\\\fitts-eval\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nvar CONST = {\n  min_dist: 30,\n  size1: 47,\n  size2: 54,\n  size3: 61,\n  rounds: 30\n};\n\nfunction convertToCSV(objArray) {\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\n  var str = Object.keys(array[0]).join(',');\n  str = str + '\\r\\n';\n\n  for (var i = 0; i < array.length; i++) {\n    var line = '';\n\n    for (var index in array[i]) {\n      if (line != '') line += ',';\n      line += array[i][index];\n    }\n\n    str += line + '\\r\\n';\n  }\n\n  return str;\n}\n\nfunction Target(_ref) {\n  var target = _ref.target,\n      radius = _ref.radius;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"target-box\",\n    style: {\n      left: \"\".concat(target[0] - 2 * radius, \"px\"),\n      top: \"\".concat(target[1] - 2 * radius, \"px\"),\n      width: \"\".concat(4 * radius, \"px\"),\n      height: \"\".concat(4 * radius, \"px\")\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"target-core\",\n      style: {\n        left: \"\".concat(radius, \"px\"),\n        top: \"\".concat(radius, \"px\"),\n        width: \"\".concat(2 * radius, \"px\"),\n        height: \"\".concat(2 * radius, \"px\")\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Target;\n\nfunction randInt(range) {\n  var min = Math.ceil(range[0]);\n  var max = Math.floor(range[1]);\n  return Math.floor(Math.random() * (max - min) + min);\n}\n\nfunction nextPos(target, bounds, radius, pad) {\n  var min_dist = CONST.min_dist;\n  var x_range = [pad + radius, bounds[0] - pad - radius];\n  var y_range = [pad + radius, bounds[1] - pad - radius];\n  var next = [randInt(x_range), randInt(y_range)];\n\n  while (calcDist(target, next) < min_dist) {\n    next = [randInt(x_range), randInt(y_range)];\n  }\n\n  return next;\n}\n\nfunction calcDist(from, to) {\n  try {\n    var x = parseFloat(from[0]) - parseFloat(to[0]);\n    var y = parseFloat(from[1]) - parseFloat(to[1]);\n    return Math.sqrt(x * x + y * y);\n  } catch (_unused) {\n    return -1;\n  }\n}\n\nexport default function Home() {\n  _s();\n\n  var _useState = useState(CONST.size1),\n      pad = _useState[0],\n      setPad = _useState[1];\n\n  var _useState2 = useState(CONST.size1),\n      radius = _useState2[0],\n      setRadius = _useState2[1];\n\n  var _useState3 = useState([0, 0]),\n      bounds = _useState3[0],\n      setBounds = _useState3[1];\n\n  var _useState4 = useState([0, 0]),\n      target = _useState4[0],\n      setTarget = _useState4[1];\n\n  var _useState5 = useState([radius, radius]),\n      touch = _useState5[0],\n      setTouch = _useState5[1];\n\n  var _useState6 = useState([radius, radius]),\n      next = _useState6[0],\n      setNext = _useState6[1];\n\n  var _useState7 = useState(0),\n      round = _useState7[0],\n      setRound = _useState7[1];\n\n  var _useState8 = useState(0),\n      time = _useState8[0],\n      setTime = _useState8[1];\n\n  var _useState9 = useState(0),\n      prevTime = _useState9[0],\n      setPrevTime = _useState9[1];\n\n  var _useState10 = useState('wait'),\n      status = _useState10[0],\n      setStatus = _useState10[1];\n\n  var _useState11 = useState([]),\n      log = _useState11[0],\n      setLog = _useState11[1];\n\n  function handleTouchStart(event) {\n    console.log(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n    setTouch([event.changedTouches[0].clientX, event.changedTouches[0].clientY]);\n  }\n\n  function init() {\n    setStatus('go');\n    setTime(Date.now());\n    setPrevTime(Date.now());\n    var next = nextPos(target, bounds, radius, pad);\n    setTarget(next);\n  }\n\n  useEffect(function () {\n    setBounds([parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width), parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)]);\n    setTarget([radius + pad, radius + pad]);\n  }, []);\n\n  function saveCsv(data) {\n    var csvStr = convertToCSV(data);\n    var csvContent = \"data:text/csv;charset=utf-8,\" + csvStr;\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"fitts_\".concat(new Date().toISOString(), \".csv\"));\n    document.body.appendChild(link);\n    link.click();\n  }\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var now, _next;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(status !== 'go')) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            now = Date.now();\n            setLog(log.concat([{\n              'round': round + 1,\n              'target_x': Math.round(target[0]),\n              'target_y': Math.round(target[1]),\n              'touch_x': Math.round(touch[0]),\n              'touch_y': Math.round(touch[1]),\n              's_time': prevTime - time,\n              'e_time': now - time,\n              'duration': now - prevTime,\n              'distance': Math.round(calcDist(touch, target)),\n              'hit': calcDist(touch, target) < 2 * radius\n            }]));\n            _context.next = 6;\n            return setRound(round + 1);\n\n          case 6:\n            _context.next = 8;\n            return setPrevTime(now);\n\n          case 8:\n            if (calcDist(touch, target) < 2 * radius) {\n              _next = nextPos(target, bounds, radius, pad);\n              setTarget(_next);\n            }\n\n            if (log.filter(function (x) {\n              return x.hit;\n            }).length >= CONST.rounds) {\n              setStatus('end');\n            }\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [touch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Fitts Eval\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"viewport\",\n        content: \"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"apple-mobile-web-app-capable\",\n        content: \"yes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"touch-bound\",\n      className: \"board\",\n      onTouchStart: function onTouchStart(e) {\n        handleTouchStart(e);\n      },\n      children: [status === 'wait' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"startBtn\",\n        onClick: init,\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 28\n      }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"distance radius\",\n        className: \"inputBox\",\n        onChange: function onChange(e) {\n          return setRadius(parseInt(e.target.value));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 28\n      }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"target button radius\",\n        className: \"inputBox\",\n        onChange: function onChange(e) {\n          return setRadius(parseInt(e.target.value));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 28\n      }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Age\",\n        className: \"inputBox\",\n        onChange: function onChange(e) {\n          return setRadius(parseInt(e.target.value));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 28\n      }, this) : '', status === 'wait' ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"User name\",\n        className: \"inputBox\",\n        onChange: function onChange(e) {\n          return setRadius(parseInt(e.target.value));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 28\n      }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas\",\n        style: {\n          margin: \"\".concat(pad, \"px\")\n        },\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"log-box\",\n          children: JSON.stringify(log.map(function (x) {\n            return [x.round, x.dist, x.e_time - x.s_time];\n          }), null, 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), status === 'go' ? /*#__PURE__*/_jsxDEV(Target, {\n        radius: radius,\n        target: target\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 26\n      }, this) : '', status === 'end' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"startBtn\",\n        onClick: function onClick() {\n          return saveCsv(log);\n        },\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 27\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Home, \"RJAgEqvbpOW2hyxe6g3wIcAL/48=\");\n\n_c2 = Home;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Target\");\n$RefreshReg$(_c2, \"Home\");","map":{"version":3,"sources":["C:/Users/parth/Videos/Docs/React/Github/fitts-eval/pages/index.js"],"names":["useState","useEffect","Head","CONST","min_dist","size1","size2","size3","rounds","convertToCSV","objArray","array","JSON","parse","str","Object","keys","join","i","length","line","index","Target","target","radius","left","top","width","height","randInt","range","min","Math","ceil","max","floor","random","nextPos","bounds","pad","x_range","y_range","next","calcDist","from","to","x","parseFloat","y","sqrt","Home","setPad","setRadius","setBounds","setTarget","touch","setTouch","setNext","round","setRound","time","setTime","prevTime","setPrevTime","status","setStatus","log","setLog","handleTouchStart","event","console","changedTouches","clientX","clientY","init","Date","now","parseInt","document","getElementById","getBoundingClientRect","saveCsv","data","csvStr","csvContent","encodedUri","encodeURI","link","createElement","setAttribute","toISOString","body","appendChild","click","concat","filter","hit","e","value","margin","stringify","map","dist","e_time","s_time"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Head from 'next/head'\r\n\r\n\r\nconst CONST = {\r\n  min_dist : 30,\r\n  size1 : 47,\r\n  size2 : 54,\r\n  size3 : 61,\r\n  rounds : 30\r\n}\r\n\r\n\r\n\r\n\r\nfunction convertToCSV(objArray) {\r\n  var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\r\n  var str = Object.keys(array[0]).join(',');\r\n  str=str+'\\r\\n';\r\n\r\n  for (var i = 0; i < array.length; i++) {\r\n    var line = '';\r\n    for (var index in array[i]) {\r\n      if (line != '') line += ','\r\n      line += array[i][index];\r\n    }\r\n    str += line + '\\r\\n';\r\n  }\r\n  return str;\r\n}\r\n\r\n\r\nfunction Target({target,radius}) {\r\n\r\n  return(\r\n    <div className=\"target-box\" style={{\r\n      left:`${target[0]-2*radius}px`,\r\n      top:`${target[1]-2*radius}px`,\r\n      width:`${4*radius}px`,\r\n      height:`${4*radius}px`\r\n    }}>\r\n      <div className=\"target-core\" style={{\r\n        left:`${radius}px`,\r\n        top:`${radius}px`,\r\n        width:`${2*radius}px`,\r\n        height:`${2*radius}px`\r\n      }}>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nfunction randInt(range) {\r\n  var min = Math.ceil(range[0]);\r\n  var max = Math.floor(range[1]);\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n}\r\n\r\n\r\nfunction nextPos(target,bounds,radius,pad){\r\n\r\n  const min_dist = CONST.min_dist;\r\n  const x_range = [pad+radius,bounds[0]-pad-radius]\r\n  const y_range = [pad+radius,bounds[1]-pad-radius]\r\n\r\n  let next = [randInt(x_range),randInt(y_range)]\r\n\r\n  while(calcDist(target,next)<min_dist){\r\n    next = [randInt(x_range),randInt(y_range)]\r\n  }\r\n  return next\r\n}\r\n\r\n\r\nfunction calcDist(from,to){\r\n\r\n  try{\r\n    var x=parseFloat(from[0])-parseFloat(to[0])\r\n    var y=parseFloat(from[1])-parseFloat(to[1])\r\n    return Math.sqrt(x*x + y*y);\r\n  }\r\n  catch{\r\n    return -1\r\n  }\r\n  \r\n}\r\n\r\nexport default function Home() {\r\n\r\n  const [pad,setPad] = useState(CONST.size1)\r\n  const [radius,setRadius] = useState(CONST.size1)\r\n  const [bounds, setBounds] = useState([0,0])\r\n  const [target, setTarget] = useState([0,0])\r\n  const [touch, setTouch] = useState([radius,radius])\r\n  const [next, setNext] = useState([radius,radius])\r\n  \r\n  const [round,setRound] = useState(0)\r\n  const [time, setTime] = useState(0)\r\n  const [prevTime,setPrevTime] = useState(0)\r\n\r\n  const [status,setStatus] = useState('wait')\r\n  const [log,setLog] = useState([])\r\n\r\n\r\n  function handleTouchStart(event){\r\n    console.log(event.changedTouches[0].clientX,event.changedTouches[0].clientY)\r\n    setTouch([event.changedTouches[0].clientX,event.changedTouches[0].clientY])\r\n  }\r\n  \r\n\r\n  function init(){\r\n    setStatus('go')\r\n    setTime(Date.now())\r\n    setPrevTime(Date.now())\r\n    \r\n    const next = nextPos(target,bounds,radius,pad)\r\n    setTarget(next)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    setBounds([\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().width),\r\n      parseInt(document.getElementById(\"touch-bound\").getBoundingClientRect().height)\r\n    ])\r\n    setTarget([radius+pad,radius+pad])\r\n  },[])\r\n\r\n\r\n  function saveCsv(data){\r\n    let csvStr = convertToCSV(data)\r\n    let csvContent = \"data:text/csv;charset=utf-8,\"+csvStr\r\n    var encodedUri = encodeURI(csvContent);\r\n    \r\n    var link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", encodedUri);\r\n    link.setAttribute(\"download\", `fitts_${(new Date()).toISOString()}.csv`);\r\n    document.body.appendChild(link); \r\n\r\n    link.click();\r\n  }\r\n\r\n  useEffect(async()=>{\r\n    if(status!=='go')return;\r\n    \r\n    const now = Date.now()\r\n    setLog(log.concat([{\r\n      'round': round+1,\r\n      'target_x' : Math.round(target[0]),\r\n      'target_y' : Math.round(target[1]),\r\n      'touch_x' : Math.round(touch[0]),\r\n      'touch_y' : Math.round(touch[1]),\r\n      's_time': prevTime-time,\r\n      'e_time': now-time,\r\n      'duration' : now - prevTime,\r\n      'distance' : Math.round(calcDist(touch,target)),\r\n      'hit' : (calcDist(touch,target)<(2*radius))\r\n    }]))\r\n\r\n    await setRound(round+1)\r\n\r\n    await setPrevTime(now)\r\n\r\n    if(calcDist(touch,target)<2*radius){\r\n      const next = nextPos(target,bounds,radius,pad)\r\n      setTarget(next)\r\n    }\r\n    \r\n    if(log.filter(x=>(x.hit)).length>=CONST.rounds){\r\n      setStatus('end')\r\n    }\r\n      \r\n  },[touch])\r\n\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Fitts Eval</title>\r\n        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover'/>\r\n        <meta name=\"mobile-web-app-capable\" content=\"yes\"/>\r\n        <meta name=\"apple-mobile-web-app-capable\" content=\"yes\"/>\r\n      </Head>\r\n      \r\n      <div id=\"touch-bound\" className=\"board\" onTouchStart={(e)=>{handleTouchStart(e)}}>\r\n        {(status==='wait')?<div className=\"startBtn\" onClick={init}>Start</div>:''}\r\n        {(status==='wait')?<input type=\"number\" placeholder=\"distance radius\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/>:''}\r\n        {(status==='wait')?<input type=\"number\" placeholder=\"target button radius\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/>:''}\r\n        {(status==='wait')?<input type=\"text\" placeholder=\"Age\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/>:''}\r\n        {(status==='wait')?<input type=\"text\" placeholder=\"User name\" className=\"inputBox\" onChange={e => setRadius(parseInt(e.target.value))}/>:''}\r\n        \r\n        <div className=\"canvas\" style={{margin: `${pad}px`}}>\r\n          <pre className=\"log-box\">\r\n            {JSON.stringify(log.map(x=>[x.round,x.dist,x.e_time-x.s_time]),null,1)}\r\n          </pre>\r\n        </div>\r\n        {(status==='go')?<Target radius={radius} target={target}/>:''}\r\n        {(status==='end')?<div className=\"startBtn\" onClick={()=>saveCsv(log)}>Download</div>:''}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}